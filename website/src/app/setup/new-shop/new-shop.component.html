<section class="py-2">
  <div class="container">
    <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
      <h1 class="display-4 fw-normal" id="start">Create your own Shop</h1>
      <p class="fs-5 text-muted">
        Fill out the form below and after just 3 steps you will be the owner of you own
        unstoppable shop!
      </p>
    </div>
  </div>
</section>

<div class="container">
  <div class="row" class="pb-4">
    <w3s-existing-shop-warning></w3s-existing-shop-warning>

    <form [formGroup]="setupShopForm">

      <ng-wizard>
        <ng-wizard-step formGroupName="firstStep" [title]="'Step 1'" [description]="'Shop Information'"
          [canExit]="isValidStep1.bind(this)" class="pb-2">
          <div class="row">
            <div class="col">
              <div class="alert alert-primary" role="alert">
                This wizard will guide you through the process of creating your self-owned and permanent Web3 shop to
                sell digital goods!<br>
                Let's jump in, its super easy! Most of the values can be edited later on, so don't worry.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group row">
                <label for="shopName" class="col-sm-2 col-form-label"><strong>Shop Name</strong></label>
                <div class="col-sm-10">
                  <input formControlName="shopName" type="text" id="shopName" maxlength="50" class="form-control"
                    placeholder="Enter your Shop Name" aria-describedby="shopNameHelp">
                  <small id="shopNameHelp" class="form-text text-muted">
                    Choose an interesting name for your shop. Keep it under 50 characters.
                  </small>
                </div>
              </div>
              <div class="form-group row">
                <label for="shortDesc" class="col-sm-2 col-form-label"><strong>Short Description</strong></label>
                <div class="col-sm-10">
                  <input formControlName="shortDescription" type="text" class="form-control" id="shortDesc"
                    maxlength="160" aria-describedby="shortDescHelp" placeholder="Short Description">
                  <small id="shortDescHelp" class="form-text text-muted">
                    Try to come up with a short punch-line describing the contents of your shop. This will also be
                    included in the generated cards, if someone shares your shop. Maximum are 160 characters.
                  </small>
                </div>
              </div>
              <div class="form-group row">
                <label for="keywords" class="col-sm-2 col-form-label"><strong>Keywords</strong></label>
                <div class="col-sm-10">
                  <w3s-keywords-editor [keywords]="keywords"></w3s-keywords-editor>
                </div>
              </div>
            </div>
          </div>
        </ng-wizard-step>

        <ng-wizard-step formGroupName="secondStep" [title]="'Step 2'" [description]="'Shop Description'"
          [canExit]="isValidStep2.bind(this)" class="pb-2">
          <div class="row">
            <div class="col">
              <div class="alert alert-primary" id="descriptionHelp" role="alert">
                This is a longer description about your shop. You can include more personal details here in order to
                connect with your customers. You can also use <a
                  href="https://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> to format this
                text if you want.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group row">
                <label for="description" class="col-sm-2 col-form-label"><strong>Description</strong></label>
                <div class="col-sm-10">
                  <textarea formControlName="description" class="form-control" id="description" rows="25"
                    aria-describedby="descriptionHelp"></textarea>
                </div>
              </div>
            </div>
          </div>
        </ng-wizard-step>

        <ng-wizard-step [title]="'Step 3'" [description]="'Confirmation'" class="pb-2">
          <div class="row">
            <div class="col">
              <div class="alert alert-warning" role="alert">
                <strong>Disclaimer:</strong>
                <p>
                  Keep in mind that you must not sell content that is either illegal or to which
                  you don't have permission to sell it. <b>Doing so will most likly send you to jail</b>.
                </p>
                <p>
                  THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT
                  NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
                  NONINFRINGEMENT.
                  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                  LIABILITY,
                  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
                  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
                </p>
                <div class="custom-control custom-checkbox mt-4">
                  <input formControlName="acceptTerms" type="checkbox" class="custom-control-input" id="acceptTerms">
                  <label class="custom-control-label" for="acceptTerms">I have understood</label>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-4 text-center">
            <div class="col">
              <button *ngIf="!(isWalletConnected$ | async)" (click)="connectWallet()" type="button"
                class="btn btn-primary btn-lg px-4">
                <fa-icon [icon]="faWallet"></fa-icon> Connect Wallet
              </button>
              <button *ngIf="isWalletConnected$ | async" [disabled]="!isReadyToDeploy" (click)="createNewShop()"
                type="button" class="btn btn-success btn-lg px-4">
                <fa-icon [icon]="faFileSignature"></fa-icon> Create Your Shop
              </button>
            </div>
          </div>
        </ng-wizard-step>

        <ng-wizard-step [title]="'Step 4'" [description]="'Shop Creation'" [canEnter]="isReadyToDeploy" class="pb-2">
          <w3s-deploy-progress *ngIf="!!deployResult" [deployProgress]="deployResult"></w3s-deploy-progress>
        </ng-wizard-step>
      </ng-wizard>
    </form>
  </div>
</div>